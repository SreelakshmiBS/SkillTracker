{% extends "base2.html" %}
{% load static %}

{% block extra_css %}
<style>
    /* Skills List Styling */
    .skills-list-container {
        max-width: 80%;
        margin: 2rem auto;
        padding: 0 1.5rem;
    }

    .skills-header {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-bottom: 2rem;
        flex-wrap: wrap;
        gap: 1rem;
    }

    .skills-header h2 {
        color: #001F4D;
        font-size: 2rem;
        font-weight: 700;
        margin: 0;
        background: linear-gradient(135deg, #0066FF, #003D99);
        -webkit-background-clip: text;
        -webkit-text-fill-color: transparent;
        background-clip: text;
    }

    .add-skill-btn {
        padding: 0.75rem 1.5rem;
        background: linear-gradient(135deg, #0066FF, #003D99);
        color: white;
        border: none;
        border-radius: 50px;
        font-weight: 600;
        cursor: pointer;
        transition: all 0.3s ease;
        text-decoration: none;
        display: inline-flex;
        align-items: center;
        gap: 0.5rem;
        box-shadow: 0 4px 15px rgba(0, 102, 255, 0.3);
    }

    .add-skill-btn:hover {
        transform: translateY(-2px);
        box-shadow: 0 8px 25px rgba(0, 102, 255, 0.4);
    }

    .skills-table-container {
        background: white;
        border-radius: 20px;
        overflow: hidden;
        box-shadow: 0 10px 40px rgba(0, 61, 153, 0.08);
        border: 1px solid #E6F0FF;
    }

    .skills-table {
        width: 100%;
        border-collapse: collapse;
    }

    .skills-table thead {
        background: linear-gradient(135deg, #0066FF, #003D99);
    }

    .skills-table th {
        padding: 1.25rem 1.5rem;
        text-align: left;
        color: white;
        font-weight: 600;
        font-size: 0.95rem;
        text-transform: uppercase;
        letter-spacing: 0.5px;
        border: none;
    }

    .skills-table th:first-child {
        border-top-left-radius: 20px;
    }

    .skills-table th:last-child {
        border-top-right-radius: 20px;
    }

    .skills-table tbody tr {
        border-bottom: 1px solid #E6F0FF;
        transition: all 0.3s ease;
    }

    .skills-table tbody tr:hover {
        background-color: #F8FAFB;
        transform: translateY(-1px);
        box-shadow: 0 4px 12px rgba(0, 61, 153, 0.1);
    }

    .skills-table tbody tr:last-child {
        border-bottom: none;
    }

    .skills-table td {
        padding: 1.25rem 1.5rem;
        color: #001F4D;
        font-size: 1rem;
        border: none;
    }

    .skill-number {
        font-weight: 600;
        color: #0066FF;
        width: 60px;
    }

    .skill-title-cell {
        font-weight: 500;
    }

    .skill-level-cell {
        position: relative;
    }

    .skill-badge {
        display: inline-block;
        padding: 6px 16px;
        border-radius: 50px;
        font-size: 0.85rem;
        font-weight: 600;
        text-align: center;
        min-width: 100px;
    }

    .badge-beginner {
        background: rgba(16, 185, 129, 0.1);
        color: #10B981;
        border: 1px solid rgba(16, 185, 129, 0.3);
    }

    .badge-intermediate {
        background: rgba(245, 158, 11, 0.1);
        color: #F59E0B;
        border: 1px solid rgba(245, 158, 11, 0.3);
    }

    .badge-advanced {
        background: rgba(239, 68, 68, 0.1);
        color: #EF4444;
        border: 1px solid rgba(239, 68, 68, 0.3);
    }

    .badge-expert {
        background: rgba(139, 92, 246, 0.1);
        color: #8B5CF6;
        border: 1px solid rgba(139, 92, 246, 0.3);
    }

    .skill-action-cell {
        width: 120px;
    }

    .view-skill-btn {
        padding: 0.5rem 1.25rem;
        background: #E6F0FF;
        color: #0066FF;
        border: 2px solid #0066FF;
        border-radius: 50px;
        font-weight: 600;
        cursor: pointer;
        transition: all 0.3s ease;
        text-decoration: none;
        display: inline-flex;
        align-items: center;
        justify-content: center;
        gap: 0.5rem;
        font-size: 0.9rem;
    }

    .view-skill-btn:hover {
        background: #0066FF;
        color: white;
        transform: translateY(-2px);
        box-shadow: 0 4px 15px rgba(0, 102, 255, 0.3);
    }

    /* Completed Badge */
    .completed-badge {
        display: inline-block;
        padding: 4px 12px;
        font-size: 0.75rem;
        font-weight: 600;
        border-radius: 50px;
        margin-left: 8px;
        background: linear-gradient(135deg, #10B981, #059669);
        color: white;
    }

    /* Goal Status */
    .goal-complete {
        background: rgba(16, 185, 129, 0.1);
        color: #10B981;
        border: 1px solid rgba(16, 185, 129, 0.3);
    }

    .goal-pending {
        background: rgba(245, 158, 11, 0.1);
        color: #F59E0B;
        border: 1px solid rgba(245, 158, 11, 0.3);
    }

    /* Empty State */
    .empty-skills {
        text-align: center;
        padding: 4rem 2rem;
        background: white;
        border-radius: 20px;
        box-shadow: 0 10px 40px rgba(0, 61, 153, 0.08);
        border: 2px dashed #E6F0FF;
    }

    .empty-skills-icon {
        width: 80px;
        height: 80px;
        background: linear-gradient(135deg, #E6F0FF, #6BA3FF);
        border-radius: 20px;
        display: flex;
        align-items: center;
        justify-content: center;
        margin: 0 auto 1.5rem;
        color: #0066FF;
    }

    .empty-skills h3 {
        color: #001F4D;
        margin-bottom: 0.5rem;
        font-size: 1.5rem;
    }

    .empty-skills p {
        color: #64748B;
        margin-bottom: 1.5rem;
        font-size: 1rem;
    }

    /* Statistics Bar */
    .skills-stats {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
        gap: 1rem;
        margin-top: 2rem;
    }

    .stat-card {
        background: white;
        border-radius: 15px;
        padding: 1.5rem;
        box-shadow: 0 5px 20px rgba(0, 61, 153, 0.08);
        border: 1px solid #E6F0FF;
        text-align: center;
    }

    .stat-card .number {
        font-size: 2rem;
        font-weight: 700;
        color: #0066FF;
        display: block;
        margin-bottom: 0.25rem;
    }

    .stat-card .label {
        font-size: 0.9rem;
        color: #64748B;
    }

    /* Animation */
    @keyframes fadeIn {
        from {
            opacity: 0;
            transform: translateY(20px);
        }
        to {
            opacity: 1;
            transform: translateY(0);
        }
    }

    .skills-table-container,
    .empty-skills {
        animation: fadeIn 0.6s ease-out;
    }

    .skills-table tbody tr {
        animation: fadeIn 0.3s ease-out;
        animation-fill-mode: both;
    }

    .skills-table tbody tr:nth-child(1) { animation-delay: 0.1s; }
    .skills-table tbody tr:nth-child(2) { animation-delay: 0.2s; }
    .skills-table tbody tr:nth-child(3) { animation-delay: 0.3s; }
    .skills-table tbody tr:nth-child(4) { animation-delay: 0.4s; }
    .skills-table tbody tr:nth-child(5) { animation-delay: 0.5s; }
    .skills-table tbody tr:nth-child(6) { animation-delay: 0.6s; }

    /* Responsive Design */
    @media (max-width: 768px) {
        .skills-list-container {
            max-width: 95%;
            padding: 0 1rem;
        }

        .skills-header {
            flex-direction: column;
            align-items: flex-start;
        }

        .skills-header h2 {
            font-size: 1.75rem;
        }

        .add-skill-btn {
            width: 100%;
            justify-content: center;
        }

        .skills-table-container {
            overflow-x: auto;
        }

        .skills-table {
            min-width: 700px;
        }

        .skills-table th,
        .skills-table td {
            padding: 1rem;
        }
    }

    @media (max-width: 480px) {
        .skills-header h2 {
            font-size: 1.5rem;
        }

        .skills-table th,
        .skills-table td {
            padding: 0.75rem;
            font-size: 0.9rem;
        }

        .skill-badge {
            padding: 4px 12px;
            font-size: 0.8rem;
            min-width: 80px;
        }

        .view-skill-btn {
            padding: 0.4rem 1rem;
            font-size: 0.85rem;
        }

        .empty-skills {
            padding: 3rem 1rem;
        }

        .empty-skills h3 {
            font-size: 1.25rem;
        }

        .skills-stats {
            grid-template-columns: 1fr;
        }
    }
</style>
{% endblock %}

{% block content %}
<div class="skills-list-container">
    <!-- Header with Title and Add Button -->
    <div class="skills-header">
        <h2>My Skills</h2>
        <a href="{% url 'add_skill' %}" class="add-skill-btn">
            <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <path d="M12 5v14M5 12h14"/>
            </svg>
            Add New Skill
        </a>
    </div>

    {% if skills %}
        <!-- Skills Table -->
        <div class="skills-table-container">
            <table class="skills-table">
                <thead>
                    <tr>
                        <th>#</th>
                        <th>Skill</th>
                        <th>Proficiency Level</th>
                        <th>Action</th>
                        <th>Goal</th>
                    </tr>
                </thead>
                <tbody>
                    {% for skill in skills %}
                    <tr>
                        <td class="skill-number">{{ forloop.counter }}</td>
                        <td class="skill-title-cell">
                            <div style="display: flex; align-items: center; gap: 0.75rem;">
                                <div style="width: 36px; height: 36px; background: linear-gradient(135deg, #6BA3FF, #0066FF); border-radius: 10px; display: flex; align-items: center; justify-content: center; color: white;">
                                    {% if "python" in skill.title|lower or "coding" in skill.title|lower %}
                                    <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                        <path d="M9.4 16.6L4.8 12l4.6-4.6L8 6l-6 6 6 6 1.4-1.4zm5.2 0l4.6-4.6-4.6-4.6L16 6l6 6-6 6-1.4-1.4z"/>
                                    </svg>
                                    {% elif "design" in skill.title|lower or "ui" in skill.title|lower %}
                                    <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                        <path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-2 15l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"/>
                                    </svg>
                                    {% elif "data" in skill.title|lower or "analytics" in skill.title|lower %}
                                    <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                        <path d="M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zM9 17H7v-5h2v5zm4 0h-2v-7h2v7zm4 0h-2v-3h2v3z"/>
                                    </svg>
                                    {% else %}
                                    <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                        <path d="M19 5h-2V3H7v2H5c-1.1 0-2 .9-2 2v1c0 2.55 1.92 4.63 4.39 4.94.63 1.5 1.98 2.63 3.61 2.96V19H7v2h10v-2h-4v-3.1c1.63-.33 2.98-1.46 3.61-2.96C19.08 12.63 21 10.55 21 8V7c0-1.1-.9-2-2-2zM5 8V7h2v3.82C5.84 10.4 5 9.3 5 8zm14 0c0 1.3-.84 2.4-2 2.82V7h2v1z"/>
                                    </svg>
                                    {% endif %}
                                </div>
                                <span>
                                    {{ skill.title }}
                                    {% if skill.is_completed %}
                                        <span class="completed-badge">Completed</span>
                                    {% endif %}
                                </span>
                            </div>
                        </td>
                        <td class="skill-level-cell">
                            <span class="skill-badge badge-{{ skill.proficiency_level|lower }}">
                                {{ skill.get_proficiency_level_display }}
                            </span>
                        </td>
                        <td class="skill-action-cell">
                            <a href="{% url 'view_skill' skill.id %}" class="view-skill-btn">
                                <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                    <path d="M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"/>
                                    <circle cx="12" cy="12" r="3"/>
                                </svg>
                                View
                            </a>
                        </td>
                        <td>
                            {% with goal=skill.goals.first %}
                                {% if goal %}
                                    {% if goal.is_completed %}
                                        <span class="skill-badge goal-complete">Goal Completed</span>
                                    {% else %}
                                        <span class="skill-badge goal-pending">Goal Ongoing</span>
                                    {% endif %}
                                {% else %}
                                    <a href="{% url 'skill_goal' %}?skill_id={{ skill.id }}" 
                                       class="view-skill-btn" 
                                       style="padding: 0.4rem 1rem; font-size: 0.85rem;">
                                        Set Goal
                                    </a>
                                {% endif %}
                            {% endwith %}
                        </td>
                    </tr>
                    {% endfor %}
                </tbody>
            </table>
        </div>

        <!-- Statistics Bar -->
        <div class="skills-stats">
            <div class="stat-card">
                <span class="number">{{ total_skills }}</span>
                <span class="label">Total Skills</span>
            </div>
            <div class="stat-card">
                <span class="number">{{ active_skills }}</span>
                <span class="label">Active Skills</span>
            </div>
            <div class="stat-card">
                <span class="number">{{ beginner_count }}</span>
                <span class="label">Beginner Level</span>
            </div>
            <div class="stat-card">
                <span class="number">{{ intermediate_count }}</span>
                <span class="label">Intermediate</span>
            </div>
            <div class="stat-card">
                <span class="number">{{ advanced_count }}</span>
                <span class="label">Advanced</span>
            </div>
        </div>

    {% else %}
        <!-- Empty State -->
        <div class="empty-skills">
            <div class="empty-skills-icon">
                <svg width="40" height="40" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <path d="M19 5h-2V3H7v2H5c-1.1 0-2 .9-2 2v1c0 2.55 1.92 4.63 4.39 4.94.63 1.5 1.98 2.63 3.61 2.96V19H7v2h10v-2h-4v-3.1c1.63-.33 2.98-1.46 3.61-2.96C19.08 12.63 21 10.55 21 8V7c0-1.1-.9-2-2-2zM5 8V7h2v3.82C5.84 10.4 5 9.3 5 8zm14 0c0 1.3-.84 2.4-2 2.82V7h2v1z"/>
                </svg>
            </div>
            <h3>No Skills Added Yet</h3>
            <p>Start your learning journey by adding your first skill!</p>
            <a href="{% url 'add_skill' %}" class="add-skill-btn" style="display: inline-flex;">
                <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <path d="M12 5v14M5 12h14"/>
                </svg>
                Add Your First Skill
            </a>
        </div>
    {% endif %}
</div>

<script>
    document.addEventListener('DOMContentLoaded', function() {
        // Add hover effects to table rows
        const tableRows = document.querySelectorAll('.skills-table tbody tr');
        tableRows.forEach(row => {
            row.addEventListener('mouseenter', function() {
                this.style.transform = 'translateY(-2px)';
                this.style.boxShadow = '0 8px 25px rgba(0, 102, 255, 0.15)';
            });
            
            row.addEventListener('mouseleave', function() {
                this.style.transform = 'translateY(0)';
                this.style.boxShadow = 'none';
            });
        });

        // Animate stats cards on scroll
        const statCards = document.querySelectorAll('.stat-card');
        const observer = new IntersectionObserver((entries) => {
            entries.forEach(entry => {
                if (entry.isIntersecting) {
                    entry.target.style.animation = 'fadeIn 0.6s ease-out';
                    entry.target.style.opacity = '1';
                    entry.target.style.transform = 'translateY(0)';
                }
            });
        }, { threshold: 0.1 });

        statCards.forEach(card => {
            card.style.opacity = '0';
            card.style.transform = 'translateY(20px)';
            observer.observe(card);
        });
    });
</script>
{% endblock %}